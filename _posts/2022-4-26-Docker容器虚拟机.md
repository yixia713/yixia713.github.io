---
layout: post
title: "Docker容器、虚拟机"
date:   2022-4-26
tags: [Linux]
archive: [操作系统]
comments: true
toc: true
author: yixia
---

容器、Docker和虚拟机的区别、定义及Docker的安装使用。

<!-- more -->

## 为什么用Docker
- Docker位于主机操作系统的顶部。所有容器共享主机OS内核、操作系统资源、二进制文件和库，而虚拟机则虚拟化基础计算机，所以容器比虚拟机更轻量化。
- 容器可以虚拟化OS，所以不同操作系统的主机，如主机A使用Linux 18.0.4，主机B使用Linux20.0.4，使用同一个容器时，库资源是共享的，宿主机操作系统的不同是可透视化的，在容器中使用同样配置的虚拟化OS，也就不会出现因为配置不同而库链接失败的情况了。适合社区开发。

## How Docker downloads the image of a container
- To Download an image
```
$ sudo docker pull busybox
Using default tag: latest
latest: Pulling from library/busybo
```
To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the "hello-world" image from the Docker Hub.
    (amd64)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.
    
- To see a list of all images on your system

`sudo docker images`

## How to run enter in a docker
`sudo docker run -it <Image>`
- `-i` 交互模式
- `-t` 终端

## How to run a command in a new container
- Run a command

`docker run [OPTIONS] IMAGE [COMMAND] [ARG...]`

例如：
```
$ sudo docker run hello-world
Unable to find image 'hello-world:latest' locally
latest: Pulling from library/hello-world
2db29710123e: Pull complete 
Digest: sha256:10d7d58d5ebd2a652f4d93fdd86da8f265f5318c6a73cc5b6a9798ff6d2b2e67
Status: Downloaded newer image for hello-world:latest
```
1. the Docker client finds the image (hello-word in this case)
2. loads up the container
3. runs a command in that container.

- Run more than one commands

`sudo docker run -it busybox sh `

`-it` attaches us to an interactive tty in the container

## How to delete a container
```
$ sudo docker ps -a
Find the container ID and copy it
$ sudo rm <Container ID>
```
## How to mount local directories
把宿主机上的文件夹复制到Docker的Volume下相当于把宿主机的目录挂载到容器的目录下，在宿主机上对文件的修改同时在容器中也会被修改，同样地，在容器中对文件的修改也会出现在宿主机上。
当挂载需要编译的源代码时，保证了可移植性（所有系统的主机目录都可以用）
## Terminology

    
![docker教程](https://docker-curriculum.com/#getting-started)

![Docker安装教程](https://docs.docker.com/engine/install/ubuntu/#install-using-the-repository)
